{% extends "base.html" %}
{% block title %}Create User - FinanceBook Admin{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-header-row">
        <div>
            <h1>Create New User</h1>
            <p class="page-subtitle">Add a new user account to the system</p>
        </div>
        <div class="page-header-actions">
            <a href="/admin/users" class="btn btn-ghost">← Back to Users</a>
        </div>
    </div>
</div>

{% if error %}
<div class="alert alert-error">
    <span class="alert-icon">⚠️</span>
    {{ error }}
</div>
{% endif %}

<div class="detail-grid">
    <div class="detail-sidebar">
        <div class="info-card">
            <h3>About</h3>
            <p class="info-text">
                Create a new user account. The user will be able to log in
                immediately with the credentials you set here.
            </p>
            <p class="info-text" style="margin-top: 0.5rem;">
                A default <strong>standard</strong> category type and
                <strong>UNCLASSIFIED</strong> category will be created
                automatically for the new user.
            </p>
        </div>
    </div>

    <div class="detail-main">
        <div class="form-card">
            <h2>User Details</h2>
            <form method="POST" action="/admin/users/create" class="edit-form">
                <fieldset>
                    <legend>Account</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">Username <span class="required">*</span></label>
                            <input type="text" id="username" name="username" value="{{ form.username or '' }}" required
                                placeholder="e.g. johndoe" maxlength="50" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="password">Password <span class="required">*</span></label>
                            <input type="password" id="password" name="password" required minlength="6"
                                autocomplete="new-password" placeholder="Minimum 6 characters">
                            <span class="form-hint">Minimum 6 characters.</span>
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Personal Information</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="prename">First Name <span class="required">*</span></label>
                            <input type="text" id="prename" name="prename" value="{{ form.prename or '' }}" required>
                        </div>
                        <div class="form-group">
                            <label for="surname">Last Name <span class="required">*</span></label>
                            <input type="text" id="surname" name="surname" value="{{ form.surname or '' }}" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="birth_date">Date of Birth</label>
                            <input type="text" id="birth_date" name="birth_date" value="{{ form.birth_date or '' }}" placeholder="DD.MM.YYYY">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" value="{{ form.phone or '' }}"
                                placeholder="+49 123 456789">
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Address</legend>
                    <div class="form-row">
                        <div class="form-group form-group-wide">
                            <label for="road">Street / Road</label>
                            <input type="text" id="road" name="road" value="{{ form.road or '' }}">
                        </div>
                        <div class="form-group form-group-narrow">
                            <label for="house_number">House No.</label>
                            <input type="text" id="house_number" name="house_number"
                                value="{{ form.house_number or '' }}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="postal">Postal Code</label>
                            <input type="text" id="postal" name="postal" value="{{ form.postal or '' }}">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" name="city" value="{{ form.city or '' }}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="region">Region</label>
                            <input type="text" id="region" name="region" value="{{ form.region or '' }}">
                        </div>
                        <div class="form-group">
                            <label for="state">State / Province</label>
                            <input type="text" id="state" name="state" value="{{ form.state or '' }}">
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Roles &amp; Status</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="hidden" name="is_admin" value="off">
                                <input type="checkbox" name="is_admin" value="on" {{ 'checked' if form.is_admin }}>
                                Grant admin privileges
                            </label>
                            <span class="form-hint">Admins can manage all users and access this panel.</span>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="hidden" name="is_active" value="off">
                                <input type="checkbox" name="is_active" value="on" {{ 'checked' if form.is_active
                                    !=false }} checked>
                                Account is active
                            </label>
                        </div>
                    </div>
                </fieldset>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create User</button>
                    <a href="/admin/users" class="btn btn-ghost">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}